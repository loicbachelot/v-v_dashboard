{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.210.0"},"children":{"DashboardStack":{"id":"DashboardStack","path":"DashboardStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.210.0"},"children":{"DashboardVPC":{"id":"DashboardVPC","path":"DashboardStack/DashboardVPC","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.Vpc","version":"2.210.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"DashboardStack/DashboardVPC/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPC","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPC","aws:cdk:cloudformation:props":{"cidrBlock":"10.0.0.0/16","enableDnsHostnames":true,"enableDnsSupport":true,"instanceTenancy":"default","tags":[{"key":"Name","value":"DashboardStack/DashboardVPC"}]}}},"PublicSubnet1":{"id":"PublicSubnet1","path":"DashboardStack/DashboardVPC/PublicSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.210.0","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"DashboardStack/DashboardVPC/PublicSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[0,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.0.0/24","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"Public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"DashboardStack/DashboardVPC/PublicSubnet1"}],"vpcId":{"Ref":"DashboardVPCD953E3B1"}}}},"Acl":{"id":"Acl","path":"DashboardStack/DashboardVPC/PublicSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.210.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"DashboardStack/DashboardVPC/PublicSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"DashboardStack/DashboardVPC/PublicSubnet1"}],"vpcId":{"Ref":"DashboardVPCD953E3B1"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"DashboardStack/DashboardVPC/PublicSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"DashboardVPCPublicSubnet1RouteTableBD182247"},"subnetId":{"Ref":"DashboardVPCPublicSubnet1Subnet29D1E361"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"DashboardStack/DashboardVPC/PublicSubnet1/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"DashboardVPCIGW6133413B"},"routeTableId":{"Ref":"DashboardVPCPublicSubnet1RouteTableBD182247"}}}}}},"PublicSubnet2":{"id":"PublicSubnet2","path":"DashboardStack/DashboardVPC/PublicSubnet2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.210.0","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"DashboardStack/DashboardVPC/PublicSubnet2/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[1,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.1.0/24","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"Public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"DashboardStack/DashboardVPC/PublicSubnet2"}],"vpcId":{"Ref":"DashboardVPCD953E3B1"}}}},"Acl":{"id":"Acl","path":"DashboardStack/DashboardVPC/PublicSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.210.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"DashboardStack/DashboardVPC/PublicSubnet2/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"DashboardStack/DashboardVPC/PublicSubnet2"}],"vpcId":{"Ref":"DashboardVPCD953E3B1"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"DashboardStack/DashboardVPC/PublicSubnet2/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"DashboardVPCPublicSubnet2RouteTable6159963C"},"subnetId":{"Ref":"DashboardVPCPublicSubnet2Subnet01866CFE"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"DashboardStack/DashboardVPC/PublicSubnet2/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"DashboardVPCIGW6133413B"},"routeTableId":{"Ref":"DashboardVPCPublicSubnet2RouteTable6159963C"}}}}}},"PrivateSubnet1":{"id":"PrivateSubnet1","path":"DashboardStack/DashboardVPC/PrivateSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.210.0","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"DashboardStack/DashboardVPC/PrivateSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[0,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.2.0/24","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Private"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"DashboardStack/DashboardVPC/PrivateSubnet1"}],"vpcId":{"Ref":"DashboardVPCD953E3B1"}}}},"Acl":{"id":"Acl","path":"DashboardStack/DashboardVPC/PrivateSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.210.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"DashboardStack/DashboardVPC/PrivateSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"DashboardStack/DashboardVPC/PrivateSubnet1"}],"vpcId":{"Ref":"DashboardVPCD953E3B1"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"DashboardStack/DashboardVPC/PrivateSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"DashboardVPCPrivateSubnet1RouteTable2B88F890"},"subnetId":{"Ref":"DashboardVPCPrivateSubnet1Subnet7EF99F4B"}}}}}},"PrivateSubnet2":{"id":"PrivateSubnet2","path":"DashboardStack/DashboardVPC/PrivateSubnet2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.210.0","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"DashboardStack/DashboardVPC/PrivateSubnet2/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[1,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.3.0/24","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Private"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"DashboardStack/DashboardVPC/PrivateSubnet2"}],"vpcId":{"Ref":"DashboardVPCD953E3B1"}}}},"Acl":{"id":"Acl","path":"DashboardStack/DashboardVPC/PrivateSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.210.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"DashboardStack/DashboardVPC/PrivateSubnet2/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"DashboardStack/DashboardVPC/PrivateSubnet2"}],"vpcId":{"Ref":"DashboardVPCD953E3B1"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"DashboardStack/DashboardVPC/PrivateSubnet2/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"DashboardVPCPrivateSubnet2RouteTableF60FA5DD"},"subnetId":{"Ref":"DashboardVPCPrivateSubnet2Subnet549AB69A"}}}}}},"IGW":{"id":"IGW","path":"DashboardStack/DashboardVPC/IGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnInternetGateway","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::InternetGateway","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"DashboardStack/DashboardVPC"}]}}},"VPCGW":{"id":"VPCGW","path":"DashboardStack/DashboardVPC/VPCGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCGatewayAttachment","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCGatewayAttachment","aws:cdk:cloudformation:props":{"internetGatewayId":{"Ref":"DashboardVPCIGW6133413B"},"vpcId":{"Ref":"DashboardVPCD953E3B1"}}}},"S3Endpoint":{"id":"S3Endpoint","path":"DashboardStack/DashboardVPC/S3Endpoint","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.GatewayVpcEndpoint","version":"2.210.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"DashboardStack/DashboardVPC/S3Endpoint/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCEndpoint","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCEndpoint","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"DashboardStack/DashboardVPC"}],"routeTableIds":[{"Ref":"DashboardVPCPrivateSubnet1RouteTable2B88F890"},{"Ref":"DashboardVPCPrivateSubnet2RouteTableF60FA5DD"},{"Ref":"DashboardVPCPublicSubnet1RouteTableBD182247"},{"Ref":"DashboardVPCPublicSubnet2RouteTable6159963C"}],"serviceName":{"Fn::Join":["",["com.amazonaws.",{"Ref":"AWS::Region"},".s3"]]},"vpcEndpointType":"Gateway","vpcId":{"Ref":"DashboardVPCD953E3B1"}}}}}},"EcsEndpoint":{"id":"EcsEndpoint","path":"DashboardStack/DashboardVPC/EcsEndpoint","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.InterfaceVpcEndpoint","version":"2.210.0","metadata":[]},"children":{"SecurityGroup":{"id":"SecurityGroup","path":"DashboardStack/DashboardVPC/EcsEndpoint/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.210.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"DashboardStack/DashboardVPC/EcsEndpoint/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"DashboardStack/DashboardVPC/EcsEndpoint/SecurityGroup","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"securityGroupIngress":[{"cidrIp":{"Fn::GetAtt":["DashboardVPCD953E3B1","CidrBlock"]},"ipProtocol":"tcp","fromPort":443,"toPort":443,"description":{"Fn::Join":["",["from ",{"Fn::GetAtt":["DashboardVPCD953E3B1","CidrBlock"]},":443"]]}}],"tags":[{"key":"Name","value":"DashboardStack/DashboardVPC"}],"vpcId":{"Ref":"DashboardVPCD953E3B1"}}}}}},"Resource":{"id":"Resource","path":"DashboardStack/DashboardVPC/EcsEndpoint/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCEndpoint","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCEndpoint","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"DashboardStack/DashboardVPC"}],"privateDnsEnabled":true,"securityGroupIds":[{"Fn::GetAtt":["DashboardVPCEcsEndpointSecurityGroup22D48712","GroupId"]}],"serviceName":{"Fn::Join":["",["com.amazonaws.",{"Ref":"AWS::Region"},".ecs"]]},"subnetIds":[{"Ref":"DashboardVPCPrivateSubnet1Subnet7EF99F4B"},{"Ref":"DashboardVPCPrivateSubnet2Subnet549AB69A"}],"vpcEndpointType":"Interface","vpcId":{"Ref":"DashboardVPCD953E3B1"}}}}}},"EcsAgentEndpoint":{"id":"EcsAgentEndpoint","path":"DashboardStack/DashboardVPC/EcsAgentEndpoint","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.InterfaceVpcEndpoint","version":"2.210.0","metadata":[]},"children":{"SecurityGroup":{"id":"SecurityGroup","path":"DashboardStack/DashboardVPC/EcsAgentEndpoint/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.210.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"DashboardStack/DashboardVPC/EcsAgentEndpoint/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"DashboardStack/DashboardVPC/EcsAgentEndpoint/SecurityGroup","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"securityGroupIngress":[{"cidrIp":{"Fn::GetAtt":["DashboardVPCD953E3B1","CidrBlock"]},"ipProtocol":"tcp","fromPort":443,"toPort":443,"description":{"Fn::Join":["",["from ",{"Fn::GetAtt":["DashboardVPCD953E3B1","CidrBlock"]},":443"]]}}],"tags":[{"key":"Name","value":"DashboardStack/DashboardVPC"}],"vpcId":{"Ref":"DashboardVPCD953E3B1"}}}}}},"Resource":{"id":"Resource","path":"DashboardStack/DashboardVPC/EcsAgentEndpoint/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCEndpoint","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCEndpoint","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"DashboardStack/DashboardVPC"}],"privateDnsEnabled":true,"securityGroupIds":[{"Fn::GetAtt":["DashboardVPCEcsAgentEndpointSecurityGroup931541CB","GroupId"]}],"serviceName":{"Fn::Join":["",["com.amazonaws.",{"Ref":"AWS::Region"},".ecs-agent"]]},"subnetIds":[{"Ref":"DashboardVPCPrivateSubnet1Subnet7EF99F4B"},{"Ref":"DashboardVPCPrivateSubnet2Subnet549AB69A"}],"vpcEndpointType":"Interface","vpcId":{"Ref":"DashboardVPCD953E3B1"}}}}}},"EcsTelemetryEndpoint":{"id":"EcsTelemetryEndpoint","path":"DashboardStack/DashboardVPC/EcsTelemetryEndpoint","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.InterfaceVpcEndpoint","version":"2.210.0","metadata":[]},"children":{"SecurityGroup":{"id":"SecurityGroup","path":"DashboardStack/DashboardVPC/EcsTelemetryEndpoint/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.210.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"DashboardStack/DashboardVPC/EcsTelemetryEndpoint/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"DashboardStack/DashboardVPC/EcsTelemetryEndpoint/SecurityGroup","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"securityGroupIngress":[{"cidrIp":{"Fn::GetAtt":["DashboardVPCD953E3B1","CidrBlock"]},"ipProtocol":"tcp","fromPort":443,"toPort":443,"description":{"Fn::Join":["",["from ",{"Fn::GetAtt":["DashboardVPCD953E3B1","CidrBlock"]},":443"]]}}],"tags":[{"key":"Name","value":"DashboardStack/DashboardVPC"}],"vpcId":{"Ref":"DashboardVPCD953E3B1"}}}}}},"Resource":{"id":"Resource","path":"DashboardStack/DashboardVPC/EcsTelemetryEndpoint/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCEndpoint","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCEndpoint","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"DashboardStack/DashboardVPC"}],"privateDnsEnabled":true,"securityGroupIds":[{"Fn::GetAtt":["DashboardVPCEcsTelemetryEndpointSecurityGroup96C32912","GroupId"]}],"serviceName":{"Fn::Join":["",["com.amazonaws.",{"Ref":"AWS::Region"},".ecs-telemetry"]]},"subnetIds":[{"Ref":"DashboardVPCPrivateSubnet1Subnet7EF99F4B"},{"Ref":"DashboardVPCPrivateSubnet2Subnet549AB69A"}],"vpcEndpointType":"Interface","vpcId":{"Ref":"DashboardVPCD953E3B1"}}}}}},"EcrEndpoint":{"id":"EcrEndpoint","path":"DashboardStack/DashboardVPC/EcrEndpoint","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.InterfaceVpcEndpoint","version":"2.210.0","metadata":[]},"children":{"SecurityGroup":{"id":"SecurityGroup","path":"DashboardStack/DashboardVPC/EcrEndpoint/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.210.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"DashboardStack/DashboardVPC/EcrEndpoint/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"DashboardStack/DashboardVPC/EcrEndpoint/SecurityGroup","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"securityGroupIngress":[{"cidrIp":{"Fn::GetAtt":["DashboardVPCD953E3B1","CidrBlock"]},"ipProtocol":"tcp","fromPort":443,"toPort":443,"description":{"Fn::Join":["",["from ",{"Fn::GetAtt":["DashboardVPCD953E3B1","CidrBlock"]},":443"]]}}],"tags":[{"key":"Name","value":"DashboardStack/DashboardVPC"}],"vpcId":{"Ref":"DashboardVPCD953E3B1"}}}}}},"Resource":{"id":"Resource","path":"DashboardStack/DashboardVPC/EcrEndpoint/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCEndpoint","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCEndpoint","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"DashboardStack/DashboardVPC"}],"privateDnsEnabled":true,"securityGroupIds":[{"Fn::GetAtt":["DashboardVPCEcrEndpointSecurityGroupD9E70436","GroupId"]}],"serviceName":{"Fn::Join":["",["com.amazonaws.",{"Ref":"AWS::Region"},".ecr.api"]]},"subnetIds":[{"Ref":"DashboardVPCPrivateSubnet1Subnet7EF99F4B"},{"Ref":"DashboardVPCPrivateSubnet2Subnet549AB69A"}],"vpcEndpointType":"Interface","vpcId":{"Ref":"DashboardVPCD953E3B1"}}}}}},"EcrDockerEndpoint":{"id":"EcrDockerEndpoint","path":"DashboardStack/DashboardVPC/EcrDockerEndpoint","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.InterfaceVpcEndpoint","version":"2.210.0","metadata":[]},"children":{"SecurityGroup":{"id":"SecurityGroup","path":"DashboardStack/DashboardVPC/EcrDockerEndpoint/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.210.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"DashboardStack/DashboardVPC/EcrDockerEndpoint/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"DashboardStack/DashboardVPC/EcrDockerEndpoint/SecurityGroup","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"securityGroupIngress":[{"cidrIp":{"Fn::GetAtt":["DashboardVPCD953E3B1","CidrBlock"]},"ipProtocol":"tcp","fromPort":443,"toPort":443,"description":{"Fn::Join":["",["from ",{"Fn::GetAtt":["DashboardVPCD953E3B1","CidrBlock"]},":443"]]}}],"tags":[{"key":"Name","value":"DashboardStack/DashboardVPC"}],"vpcId":{"Ref":"DashboardVPCD953E3B1"}}}}}},"Resource":{"id":"Resource","path":"DashboardStack/DashboardVPC/EcrDockerEndpoint/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCEndpoint","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCEndpoint","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"DashboardStack/DashboardVPC"}],"privateDnsEnabled":true,"securityGroupIds":[{"Fn::GetAtt":["DashboardVPCEcrDockerEndpointSecurityGroup20BEC1BA","GroupId"]}],"serviceName":{"Fn::Join":["",["com.amazonaws.",{"Ref":"AWS::Region"},".ecr.dkr"]]},"subnetIds":[{"Ref":"DashboardVPCPrivateSubnet1Subnet7EF99F4B"},{"Ref":"DashboardVPCPrivateSubnet2Subnet549AB69A"}],"vpcEndpointType":"Interface","vpcId":{"Ref":"DashboardVPCD953E3B1"}}}}}},"LogsEndpoint":{"id":"LogsEndpoint","path":"DashboardStack/DashboardVPC/LogsEndpoint","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.InterfaceVpcEndpoint","version":"2.210.0","metadata":[]},"children":{"SecurityGroup":{"id":"SecurityGroup","path":"DashboardStack/DashboardVPC/LogsEndpoint/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.210.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"DashboardStack/DashboardVPC/LogsEndpoint/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"DashboardStack/DashboardVPC/LogsEndpoint/SecurityGroup","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"securityGroupIngress":[{"cidrIp":{"Fn::GetAtt":["DashboardVPCD953E3B1","CidrBlock"]},"ipProtocol":"tcp","fromPort":443,"toPort":443,"description":{"Fn::Join":["",["from ",{"Fn::GetAtt":["DashboardVPCD953E3B1","CidrBlock"]},":443"]]}}],"tags":[{"key":"Name","value":"DashboardStack/DashboardVPC"}],"vpcId":{"Ref":"DashboardVPCD953E3B1"}}}}}},"Resource":{"id":"Resource","path":"DashboardStack/DashboardVPC/LogsEndpoint/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCEndpoint","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCEndpoint","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"DashboardStack/DashboardVPC"}],"privateDnsEnabled":true,"securityGroupIds":[{"Fn::GetAtt":["DashboardVPCLogsEndpointSecurityGroup754AB685","GroupId"]}],"serviceName":{"Fn::Join":["",["com.amazonaws.",{"Ref":"AWS::Region"},".logs"]]},"subnetIds":[{"Ref":"DashboardVPCPrivateSubnet1Subnet7EF99F4B"},{"Ref":"DashboardVPCPrivateSubnet2Subnet549AB69A"}],"vpcEndpointType":"Interface","vpcId":{"Ref":"DashboardVPCD953E3B1"}}}}}}}},"DashboardCluster":{"id":"DashboardCluster","path":"DashboardStack/DashboardCluster","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.Cluster","version":"2.210.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"DashboardStack/DashboardCluster/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnCluster","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Cluster","aws:cdk:cloudformation:props":{}}}}},"VVDashboardRepo":{"id":"VVDashboardRepo","path":"DashboardStack/VVDashboardRepo","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.RepositoryBase","version":"2.210.0","metadata":[]}},"BenchmarkDataBucket":{"id":"BenchmarkDataBucket","path":"DashboardStack/BenchmarkDataBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.210.0","metadata":[]}},"DashboardTaskRole":{"id":"DashboardTaskRole","path":"DashboardStack/DashboardTaskRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.210.0","metadata":[]},"children":{"ImportDashboardTaskRole":{"id":"ImportDashboardTaskRole","path":"DashboardStack/DashboardTaskRole/ImportDashboardTaskRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.210.0","metadata":[]}},"Resource":{"id":"Resource","path":"DashboardStack/DashboardTaskRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"DashboardStack/DashboardTaskRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.210.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"DashboardStack/DashboardTaskRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":s3:::benchmark-vv-data"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":s3:::benchmark-vv-data/public_ds/*"]]}]},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":s3:::benchmark-vv-data"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":s3:::benchmark-vv-data/benchmark_templates/*"]]}]},{"Action":["ecr:BatchCheckLayerAvailability","ecr:GetDownloadUrlForLayer","ecr:BatchGetImage"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":ecr:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":repository/v-v_dashboard"]]}},{"Action":"ecr:GetAuthorizationToken","Effect":"Allow","Resource":"*"},{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::GetAtt":["DashboardTaskDefDashboardContainerLogGroup17CC9239","Arn"]}}],"Version":"2012-10-17"},"policyName":"DashboardTaskRoleDefaultPolicyB5EC7C36","roles":[{"Ref":"DashboardTaskRoleB63B07D1"}]}}}}}}},"DashboardTaskDef":{"id":"DashboardTaskDef","path":"DashboardStack/DashboardTaskDef","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateTaskDefinition","version":"2.210.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"DashboardStack/DashboardTaskDef/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"essential":true,"image":{"Fn::Join":["",[{"Ref":"AWS::AccountId"},".dkr.ecr.",{"Ref":"AWS::Region"},".",{"Ref":"AWS::URLSuffix"},"/v-v_dashboard:2.1.14"]]},"name":"DashboardContainer","portMappings":[{"containerPort":8050,"protocol":"tcp"}],"logConfiguration":{"logDriver":"awslogs","options":{"awslogs-group":{"Ref":"DashboardTaskDefDashboardContainerLogGroup17CC9239"},"awslogs-stream-prefix":"DashboardApp","awslogs-region":{"Ref":"AWS::Region"}}}}],"cpu":"2048","executionRoleArn":{"Fn::GetAtt":["DashboardTaskRoleB63B07D1","Arn"]},"family":"DashboardStackDashboardTaskDefF743B63B","memory":"12288","networkMode":"awsvpc","requiresCompatibilities":["FARGATE"],"taskRoleArn":{"Fn::GetAtt":["DashboardTaskRoleB63B07D1","Arn"]}}}},"DashboardContainer":{"id":"DashboardContainer","path":"DashboardStack/DashboardTaskDef/DashboardContainer","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"2.210.0"},"children":{"LogGroup":{"id":"LogGroup","path":"DashboardStack/DashboardTaskDef/DashboardContainer/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.210.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"DashboardStack/DashboardTaskDef/DashboardContainer/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{}}}}}}}}},"DashboardFargateService":{"id":"DashboardFargateService","path":"DashboardStack/DashboardFargateService","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs_patterns.ApplicationLoadBalancedFargateService","version":"2.210.0"},"children":{"LB":{"id":"LB","path":"DashboardStack/DashboardFargateService/LB","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer","version":"2.210.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"DashboardStack/DashboardFargateService/LB/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnLoadBalancer","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::LoadBalancer","aws:cdk:cloudformation:props":{"loadBalancerAttributes":[{"key":"deletion_protection.enabled","value":"false"}],"scheme":"internet-facing","securityGroups":[{"Fn::GetAtt":["DashboardFargateServiceLBSecurityGroup30C3E6F7","GroupId"]}],"subnets":[{"Ref":"DashboardVPCPublicSubnet1Subnet29D1E361"},{"Ref":"DashboardVPCPublicSubnet2Subnet01866CFE"}],"type":"application"}}},"SecurityGroup":{"id":"SecurityGroup","path":"DashboardStack/DashboardFargateService/LB/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.210.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"DashboardStack/DashboardFargateService/LB/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Automatically created Security Group for ELB DashboardStackDashboardFargateServiceLB25CAC403","securityGroupIngress":[{"cidrIp":"0.0.0.0/0","ipProtocol":"tcp","fromPort":80,"toPort":80,"description":"Allow from anyone on port 80"}],"vpcId":{"Ref":"DashboardVPCD953E3B1"}}}},"to DashboardStackDashboardFargateServiceSecurityGroup3CFC98C8:8050":{"id":"to DashboardStackDashboardFargateServiceSecurityGroup3CFC98C8:8050","path":"DashboardStack/DashboardFargateService/LB/SecurityGroup/to DashboardStackDashboardFargateServiceSecurityGroup3CFC98C8:8050","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupEgress","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupEgress","aws:cdk:cloudformation:props":{"description":"Load balancer to target","destinationSecurityGroupId":{"Fn::GetAtt":["DashboardFargateServiceSecurityGroup5D1F94D6","GroupId"]},"fromPort":8050,"groupId":{"Fn::GetAtt":["DashboardFargateServiceLBSecurityGroup30C3E6F7","GroupId"]},"ipProtocol":"tcp","toPort":8050}}}}},"PublicListener":{"id":"PublicListener","path":"DashboardStack/DashboardFargateService/LB/PublicListener","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationListener","version":"2.210.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"DashboardStack/DashboardFargateService/LB/PublicListener/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnListener","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::Listener","aws:cdk:cloudformation:props":{"defaultActions":[{"type":"forward","targetGroupArn":{"Ref":"DashboardFargateServiceLBPublicListenerECSGroupDCF18B2C"}}],"loadBalancerArn":{"Ref":"DashboardFargateServiceLBA5F9D455"},"port":80,"protocol":"HTTP"}}},"ECSGroup":{"id":"ECSGroup","path":"DashboardStack/DashboardFargateService/LB/PublicListener/ECSGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationTargetGroup","version":"2.210.0"},"children":{"Resource":{"id":"Resource","path":"DashboardStack/DashboardFargateService/LB/PublicListener/ECSGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnTargetGroup","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::TargetGroup","aws:cdk:cloudformation:props":{"port":80,"protocol":"HTTP","targetGroupAttributes":[{"key":"stickiness.enabled","value":"false"}],"targetType":"ip","vpcId":{"Ref":"DashboardVPCD953E3B1"}}}}}}}}}},"LoadBalancerDNS":{"id":"LoadBalancerDNS","path":"DashboardStack/DashboardFargateService/LoadBalancerDNS","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.210.0"}},"ServiceURL":{"id":"ServiceURL","path":"DashboardStack/DashboardFargateService/ServiceURL","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.210.0"}},"Service":{"id":"Service","path":"DashboardStack/DashboardFargateService/Service","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateService","version":"2.210.0","metadata":[]},"children":{"Service":{"id":"Service","path":"DashboardStack/DashboardFargateService/Service/Service","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnService","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Service","aws:cdk:cloudformation:props":{"cluster":{"Ref":"DashboardClusterD073E347"},"deploymentConfiguration":{"maximumPercent":200,"minimumHealthyPercent":50,"alarms":{"alarmNames":[],"enable":false,"rollback":false}},"enableEcsManagedTags":false,"healthCheckGracePeriodSeconds":60,"launchType":"FARGATE","loadBalancers":[{"targetGroupArn":{"Ref":"DashboardFargateServiceLBPublicListenerECSGroupDCF18B2C"},"containerName":"DashboardContainer","containerPort":8050}],"networkConfiguration":{"awsvpcConfiguration":{"assignPublicIp":"DISABLED","subnets":[{"Ref":"DashboardVPCPrivateSubnet1Subnet7EF99F4B"},{"Ref":"DashboardVPCPrivateSubnet2Subnet549AB69A"}],"securityGroups":[{"Fn::GetAtt":["DashboardFargateServiceSecurityGroup5D1F94D6","GroupId"]}]}},"taskDefinition":{"Ref":"DashboardTaskDef833291EC"}}}},"SecurityGroup":{"id":"SecurityGroup","path":"DashboardStack/DashboardFargateService/Service/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.210.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"DashboardStack/DashboardFargateService/Service/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"DashboardStack/DashboardFargateService/Service/SecurityGroup","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Ref":"DashboardVPCD953E3B1"}}}},"from DashboardStackDashboardFargateServiceLBSecurityGroupA8C3869D:8050":{"id":"from DashboardStackDashboardFargateServiceLBSecurityGroupA8C3869D:8050","path":"DashboardStack/DashboardFargateService/Service/SecurityGroup/from DashboardStackDashboardFargateServiceLBSecurityGroupA8C3869D:8050","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Load balancer to target","fromPort":8050,"groupId":{"Fn::GetAtt":["DashboardFargateServiceSecurityGroup5D1F94D6","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["DashboardFargateServiceLBSecurityGroup30C3E6F7","GroupId"]},"toPort":8050}}}}}}}}},"LambdaExecutionRole":{"id":"LambdaExecutionRole","path":"DashboardStack/LambdaExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.210.0","metadata":[]},"children":{"ImportLambdaExecutionRole":{"id":"ImportLambdaExecutionRole","path":"DashboardStack/LambdaExecutionRole/ImportLambdaExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.210.0","metadata":[]}},"Resource":{"id":"Resource","path":"DashboardStack/LambdaExecutionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"DashboardStack/LambdaExecutionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.210.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"DashboardStack/LambdaExecutionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"s3:ListBucket","Condition":{"StringLike":{"s3:prefix":"upload/"}},"Effect":"Allow","Resource":"arn:aws:s3:::my-bucket"},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":s3:::benchmark-vv-data"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":s3:::benchmark-vv-data/upload/*"]]}]},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":s3:::benchmark-vv-data"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":s3:::benchmark-vv-data/benchmark_templates/*"]]}]},{"Action":["s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":s3:::benchmark-vv-data/public_ds/*"]]}},{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":dynamodb:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":table/DETFileProcessingStatus"]]},{"Ref":"AWS::NoValue"}]},{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":dynamodb:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":table/DETFileProcessingStatus"]]},{"Ref":"AWS::NoValue"}]}],"Version":"2012-10-17"},"policyName":"LambdaExecutionRoleDefaultPolicy6D69732F","roles":[{"Ref":"LambdaExecutionRoleD5C26073"}]}}}}}}},"VvLambdaUploadRepo":{"id":"VvLambdaUploadRepo","path":"DashboardStack/VvLambdaUploadRepo","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.RepositoryBase","version":"2.210.0","metadata":[]}},"DETFileProcessingStatusTable":{"id":"DETFileProcessingStatusTable","path":"DashboardStack/DETFileProcessingStatusTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.TableBase","version":"2.210.0","metadata":[]}},"ProcessUploadsLambda":{"id":"ProcessUploadsLambda","path":"DashboardStack/ProcessUploadsLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.DockerImageFunction","version":"2.210.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"DashboardStack/ProcessUploadsLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"imageUri":{"Fn::Join":["",[{"Ref":"AWS::AccountId"},".dkr.ecr.",{"Ref":"AWS::Region"},".",{"Ref":"AWS::URLSuffix"},"/vv-lambda-upload:2.0.16"]]}},"environment":{"variables":{"TABLE_NAME":"DETFileProcessingStatus"}},"functionName":"process_uploads","memorySize":8192,"packageType":"Image","role":{"Fn::GetAtt":["LambdaExecutionRoleD5C26073","Arn"]},"timeout":480}}}}},"NotifyFailLambda":{"id":"NotifyFailLambda","path":"DashboardStack/NotifyFailLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.210.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"DashboardStack/NotifyFailLambda/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.210.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"DashboardStack/NotifyFailLambda/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.210.0","metadata":[]}},"Resource":{"id":"Resource","path":"DashboardStack/NotifyFailLambda/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"DashboardStack/NotifyFailLambda/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.210.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"DashboardStack/NotifyFailLambda/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":s3:::benchmark-vv-data"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":s3:::benchmark-vv-data/*"]]}]},{"Action":["dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":dynamodb:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":table/DETFileProcessingStatus"]]},{"Ref":"AWS::NoValue"}]}],"Version":"2012-10-17"},"policyName":"NotifyFailLambdaServiceRoleDefaultPolicy16F91780","roles":[{"Ref":"NotifyFailLambdaServiceRole0C02F0DD"}]}}}}}}},"Resource":{"id":"Resource","path":"DashboardStack/NotifyFailLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"zipFile":"\nimport json\nimport os\nimport boto3\n\ns3 = boto3.client(\"s3\")\n\ndef handler(event, context):\n    try:\n        print(\"Raw failure event:\", json.dumps(event))\n        \n        # Fast extraction without S3 API calls\n        s3_detail = event.get(\"s3Event\", {}).get(\"detail\", {})\n        bucket = s3_detail.get(\"bucket\", {}).get(\"name\", \"unknown\")\n        key = s3_detail.get(\"object\", {}).get(\"key\", \"unknown\")\n        # Extract metadata from the uploaded file\n        response = s3.head_object(Bucket=bucket, Key=key)\n        user_metadata = response.get('Metadata', {})\n        user_id = user_metadata.get(\"userid\")\n        \n        print(f\"bucket={bucket}, key={key}, user_id={user_id}\")\n        \n        # Minimal DynamoDB update\n        dynamodb = boto3.resource(\"dynamodb\")\n        table = dynamodb.Table(os.environ[\"TABLE_NAME\"])\n        table.update_item(\n            Key={\"userId\": user_id, \"fileId\": os.path.basename(key)},\n            UpdateExpression=\"SET #s = :s, #e = :e\",\n            ExpressionAttributeNames={\"#s\": \"status\", \"#e\": \"error\"},\n            ExpressionAttributeValues={\n                \":s\": \"failed\",\n                \":e\": event.get(\"error\", \"Timeout during processing\")\n            }\n        )\n        \n        return {\"status\": \"failure_recorded\"}\n        \n    except Exception as e:\n        print(f\"CRITICAL: Failure handler failed: {str(e)}\")\n        raise\n                "},"environment":{"variables":{"TABLE_NAME":"DETFileProcessingStatus"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["NotifyFailLambdaServiceRole0C02F0DD","Arn"]},"runtime":"python3.9","timeout":20}}}}},"StoreOriginalEvent":{"id":"StoreOriginalEvent","path":"DashboardStack/StoreOriginalEvent","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.210.0"}},"ProcessFile":{"id":"ProcessFile","path":"DashboardStack/ProcessFile","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.210.0"}},"HandleFailure":{"id":"HandleFailure","path":"DashboardStack/HandleFailure","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.210.0"}},"FileProcessingStateMachine":{"id":"FileProcessingStateMachine","path":"DashboardStack/FileProcessingStateMachine","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachine","version":"2.210.0","metadata":[]},"children":{"Role":{"id":"Role","path":"DashboardStack/FileProcessingStateMachine/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.210.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"DashboardStack/FileProcessingStateMachine/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.210.0","metadata":[]}},"Resource":{"id":"Resource","path":"DashboardStack/FileProcessingStateMachine/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"states.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"DashboardStack/FileProcessingStateMachine/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.210.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"DashboardStack/FileProcessingStateMachine/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["ProcessUploadsLambda84DEDD78","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ProcessUploadsLambda84DEDD78","Arn"]},":*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["NotifyFailLambdaD57D347A","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["NotifyFailLambdaD57D347A","Arn"]},":*"]]}]}],"Version":"2012-10-17"},"policyName":"FileProcessingStateMachineRoleDefaultPolicy39D17F6D","roles":[{"Ref":"FileProcessingStateMachineRole35FB2BBC"}]}}}}}}},"Resource":{"id":"Resource","path":"DashboardStack/FileProcessingStateMachine/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.CfnStateMachine","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::StepFunctions::StateMachine","aws:cdk:cloudformation:props":{"definitionString":{"Fn::Join":["",["{\"StartAt\":\"StoreOriginalEvent\",\"States\":{\"StoreOriginalEvent\":{\"Type\":\"Pass\",\"Parameters\":{\"originalEvent.$\":\"$\"},\"Next\":\"ProcessFile\"},\"ProcessFile\":{\"End\":true,\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Catch\":[{\"ErrorEquals\":[\"States.ALL\"],\"ResultPath\":\"$.errorInfo\",\"Next\":\"HandleFailure\"}],\"Type\":\"Task\",\"ResultPath\":\"$.lambdaResult\",\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",{"Fn::GetAtt":["ProcessUploadsLambda84DEDD78","Arn"]},"\",\"Payload\":{\"s3Event.$\":\"$.originalEvent\"}}},\"HandleFailure\":{\"End\":true,\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",{"Fn::GetAtt":["NotifyFailLambdaD57D347A","Arn"]},"\",\"Payload\":{\"s3Event.$\":\"$.originalEvent\",\"error.$\":\"$.errorInfo.Error\"}}}},\"TimeoutSeconds\":600}"]]},"roleArn":{"Fn::GetAtt":["FileProcessingStateMachineRole35FB2BBC","Arn"]}}}},"EventsRole":{"id":"EventsRole","path":"DashboardStack/FileProcessingStateMachine/EventsRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.210.0","metadata":[]},"children":{"ImportEventsRole":{"id":"ImportEventsRole","path":"DashboardStack/FileProcessingStateMachine/EventsRole/ImportEventsRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.210.0","metadata":[]}},"Resource":{"id":"Resource","path":"DashboardStack/FileProcessingStateMachine/EventsRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"events.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"DashboardStack/FileProcessingStateMachine/EventsRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.210.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"DashboardStack/FileProcessingStateMachine/EventsRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"states:StartExecution","Effect":"Allow","Resource":{"Ref":"FileProcessingStateMachine9BD2AF4B"}}],"Version":"2012-10-17"},"policyName":"FileProcessingStateMachineEventsRoleDefaultPolicyB14A5D13","roles":[{"Ref":"FileProcessingStateMachineEventsRole9C87F08F"}]}}}}}}}}},"S3UploadRule":{"id":"S3UploadRule","path":"DashboardStack/S3UploadRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.210.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"DashboardStack/S3UploadRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"eventPattern":{"detail":{"bucket":{"name":["benchmark-vv-data"]},"object":{"key":[{"prefix":"upload/"}]}},"detail-type":["Object Created","Object Updated"],"source":["aws.s3"]},"state":"ENABLED","targets":[{"id":"Target0","arn":{"Ref":"FileProcessingStateMachine9BD2AF4B"},"roleArn":{"Fn::GetAtt":["FileProcessingStateMachineEventsRole9C87F08F","Arn"]}}]}}}}},"StatusCheckLambda":{"id":"StatusCheckLambda","path":"DashboardStack/StatusCheckLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.210.0","metadata":[]},"children":{"Code":{"id":"Code","path":"DashboardStack/StatusCheckLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.210.0"},"children":{"Stage":{"id":"Stage","path":"DashboardStack/StatusCheckLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.210.0"}},"AssetBucket":{"id":"AssetBucket","path":"DashboardStack/StatusCheckLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.210.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"DashboardStack/StatusCheckLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"c5617d14023c72b7c25831525f2cbb0173583af28e480ded70b00a5213250505.zip"},"environment":{"variables":{"TABLE_NAME":"DETFileProcessingStatus"}},"handler":"handler.lambda_handler","memorySize":256,"role":{"Fn::GetAtt":["LambdaExecutionRoleD5C26073","Arn"]},"runtime":"python3.9","timeout":10}}}}},"FileStatusAPI":{"id":"FileStatusAPI","path":"DashboardStack/FileStatusAPI","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RestApi","version":"2.210.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"DashboardStack/FileStatusAPI/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRestApi","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RestApi","aws:cdk:cloudformation:props":{"name":"FileStatusAPI"}}},"CloudWatchRole":{"id":"CloudWatchRole","path":"DashboardStack/FileStatusAPI/CloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.210.0","metadata":[]},"children":{"ImportCloudWatchRole":{"id":"ImportCloudWatchRole","path":"DashboardStack/FileStatusAPI/CloudWatchRole/ImportCloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.210.0","metadata":[]}},"Resource":{"id":"Resource","path":"DashboardStack/FileStatusAPI/CloudWatchRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"apigateway.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"]]}]}}}}},"Account":{"id":"Account","path":"DashboardStack/FileStatusAPI/Account","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAccount","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Account","aws:cdk:cloudformation:props":{"cloudWatchRoleArn":{"Fn::GetAtt":["FileStatusAPICloudWatchRoleDEDF059D","Arn"]}}}},"Deployment":{"id":"Deployment","path":"DashboardStack/FileStatusAPI/Deployment","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Deployment","version":"2.210.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"DashboardStack/FileStatusAPI/Deployment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnDeployment","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Deployment","aws:cdk:cloudformation:props":{"description":"Automatically created by the RestApi construct","restApiId":{"Ref":"FileStatusAPI9226CEE5"}}}}}},"DeploymentStage.prod":{"id":"DeploymentStage.prod","path":"DashboardStack/FileStatusAPI/DeploymentStage.prod","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Stage","version":"2.210.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"DashboardStack/FileStatusAPI/DeploymentStage.prod/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnStage","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Stage","aws:cdk:cloudformation:props":{"deploymentId":{"Ref":"FileStatusAPIDeployment39A2B4428f9d80d77c2e5898e81746650522dcf3"},"restApiId":{"Ref":"FileStatusAPI9226CEE5"},"stageName":"prod"}}}}},"Endpoint":{"id":"Endpoint","path":"DashboardStack/FileStatusAPI/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.210.0"}},"Default":{"id":"Default","path":"DashboardStack/FileStatusAPI/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ResourceBase","version":"2.210.0","metadata":[]},"children":{"OPTIONS":{"id":"OPTIONS","path":"DashboardStack/FileStatusAPI/Default/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.210.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"DashboardStack/FileStatusAPI/Default/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization'","method.response.header.Access-Control-Allow-Origin":"'https://det-uploader.cascadiaquakes.org'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'GET,OPTIONS'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Fn::GetAtt":["FileStatusAPI9226CEE5","RootResourceId"]},"restApiId":{"Ref":"FileStatusAPI9226CEE5"}}}}}},"status":{"id":"status","path":"DashboardStack/FileStatusAPI/Default/status","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.210.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"DashboardStack/FileStatusAPI/Default/status/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["FileStatusAPI9226CEE5","RootResourceId"]},"pathPart":"status","restApiId":{"Ref":"FileStatusAPI9226CEE5"}}}},"OPTIONS":{"id":"OPTIONS","path":"DashboardStack/FileStatusAPI/Default/status/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.210.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"DashboardStack/FileStatusAPI/Default/status/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization'","method.response.header.Access-Control-Allow-Origin":"'https://det-uploader.cascadiaquakes.org'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'GET,OPTIONS'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"FileStatusAPIstatusE0D2D470"},"restApiId":{"Ref":"FileStatusAPI9226CEE5"}}}}}},"GET":{"id":"GET","path":"DashboardStack/FileStatusAPI/Default/status/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.210.0","metadata":[]},"children":{"ApiPermission.DashboardStackFileStatusAPID3B07079.GET..status":{"id":"ApiPermission.DashboardStackFileStatusAPID3B07079.GET..status","path":"DashboardStack/FileStatusAPI/Default/status/GET/ApiPermission.DashboardStackFileStatusAPID3B07079.GET..status","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["StatusCheckLambda34B9AB1E","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"FileStatusAPI9226CEE5"},"/",{"Ref":"FileStatusAPIDeploymentStageprod5CAD658B"},"/GET/status"]]}}}},"ApiPermission.Test.DashboardStackFileStatusAPID3B07079.GET..status":{"id":"ApiPermission.Test.DashboardStackFileStatusAPID3B07079.GET..status","path":"DashboardStack/FileStatusAPI/Default/status/GET/ApiPermission.Test.DashboardStackFileStatusAPID3B07079.GET..status","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["StatusCheckLambda34B9AB1E","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"FileStatusAPI9226CEE5"},"/test-invoke-stage/GET/status"]]}}}},"Resource":{"id":"Resource","path":"DashboardStack/FileStatusAPI/Default/status/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"AWS_IAM","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:",{"Ref":"AWS::Region"},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["StatusCheckLambda34B9AB1E","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"FileStatusAPIstatusE0D2D470"},"restApiId":{"Ref":"FileStatusAPI9226CEE5"}}}}}}}}}}}},"StatusAPIEndpoint":{"id":"StatusAPIEndpoint","path":"DashboardStack/StatusAPIEndpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.210.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"DashboardStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"DashboardStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.210.0"}},"Condition":{"id":"Condition","path":"DashboardStack/CDKMetadata/Condition","constructInfo":{"fqn":"aws-cdk-lib.CfnCondition","version":"2.210.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"DashboardStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.210.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"DashboardStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.210.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}